<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cap Clair — Temps 1 · Clarifier le terrain</title>

  <style>
    :root{
      --green:#A8C1A1; --sky:#B8CBD0; --ink:#344D59; --beige:#FFFAF3;
      --azure:#9BB0B8; --terra:#D49A89; --brown:#815133;

      --bg:var(--beige); --paper:#fff;
      --border: color-mix(in srgb, var(--azure) 35%, #fff);
      --muted: color-mix(in srgb, var(--ink) 72%, #fff);
      --brand: var(--green); --brand2: var(--sky);
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 18px;
      --max: 980px;
    }

    *{box-sizing:border-box}
    body{margin:0; background:var(--bg); color:var(--ink); font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
    .wrap{max-width:var(--max); margin:28px auto; padding:0 16px;}
    .card{background:var(--paper); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden;}
    .banner{
      background:
        radial-gradient(1200px 360px at 20% 0%, color-mix(in srgb, var(--brand2) 55%, transparent), transparent 60%),
        linear-gradient(135deg, color-mix(in srgb, var(--brand) 92%, #fff 8%), color-mix(in srgb, var(--ink) 18%, var(--brand2) 82%));
      color:#fff; padding:22px 22px 18px;
    }
    .top{display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap;}
    .brand{display:flex; align-items:center; gap:12px;}
    .logo{width:52px; height:52px; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.35); background:rgba(255,255,255,.16); box-shadow:0 6px 18px rgba(0,0,0,.10)}
    .logo img{width:100%; height:100%; object-fit:cover; display:block}
    .kicker{font-size:12px; letter-spacing:.12em; text-transform:uppercase; opacity:.92}
    .title{font-size:20px; font-weight:780; margin:2px 0 0}
    .meta{display:flex; gap:10px; flex-wrap:wrap; font-size:13px; opacity:.97}
    .pill{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.25); white-space:nowrap}
    .subtitle{margin:14px 0 0; max-width:74ch; font-size:14px; opacity:.95}

    .content{padding:26px 22px 28px;}
    h2{font-size:18px; margin:0 0 10px}
    .muted{color:var(--muted)}
    .small{font-size:13px}
    .divider{height:1px; background:var(--border); margin:18px 0 22px}
    .section{max-width: 820px; margin: 0 auto;} /* centré + aéré */

    label{display:block; font-weight:750; margin:14px 0 6px}
    input[type="text"], textarea{
      width:100%; padding:12px 12px; border:1px solid var(--border); border-radius:12px; background:#fff; outline:none; color:var(--ink);
    }
    textarea{min-height:90px; resize:vertical}
    input:focus, textarea:focus{
      border-color: color-mix(in srgb, var(--brand) 55%, var(--border));
      box-shadow:0 0 0 4px color-mix(in srgb, var(--brand2) 22%, transparent);
    }

    .chips{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px}
    .chip{display:flex; align-items:center; gap:10px; padding:10px 12px; border:1px solid var(--border); border-radius:999px; background:#fff}
    .grid{display:grid; grid-template-columns: 1fr 1fr; gap:14px}
    @media (max-width:860px){ .grid{grid-template-columns:1fr} }

    .actions{display:flex; gap:10px; flex-wrap:wrap; margin:18px 0 8px}
    button{
      appearance:none; border:1px solid var(--border); background:#fff; color:var(--ink);
      padding:10px 12px; border-radius:999px; cursor:pointer; font-weight:800;
    }
    .primary{
      background: color-mix(in srgb, var(--brand) 88%, var(--ink) 12%);
      color:#fff; border-color: color-mix(in srgb, var(--brand) 70%, var(--ink) 30%);
    }

    .nav{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; margin-top:22px}
    a.linkbtn{
      display:inline-flex; gap:10px; align-items:center;
      text-decoration:none; padding:10px 12px; border-radius:999px;
      border:1px solid var(--border); background:#fff; color:var(--ink); font-weight:800;
    }
    a.linkbtn.primary{background:var(--ink); color:#fff; border-color: color-mix(in srgb, var(--ink) 70%, #000)}

    @media print{
      body{background:#fff}
      .wrap{margin:0; max-width:none; padding:0}
      .card{border:none; box-shadow:none; border-radius:0}
      .actions, .smallprint, .nav{display:none !important}
      input, textarea{border:1px solid #bbb !important; box-shadow:none !important}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <header class="banner">
        <div class="top">
          <div class="brand">
            <div class="logo"><img src="assets/logo.png" alt="Logo"></div>
            <div>
              <div class="kicker">Cap Clair — Semaine 4</div>
              <div class="title">Temps 1 · Clarifier le terrain</div>
            </div>
          </div>
          <div class="meta">
            <div class="pill">Interactif ✓</div>
            <div class="pill">Imprimable ✓</div>
            <div class="pill">Export réponses ✓</div>
          </div>
        </div>
        <p class="subtitle">On clarifie le domaine et l’objectif minimum. Juste ce qu’il faut, sans se perdre.</p>
      </header>

      <main class="content">
        <div class="section">
          <h2>Mode d’emploi</h2>
          <p class="muted">Remplis en quelques minutes. Sauvegarde si tu veux. Puis passe au Temps 2.</p>

          <div class="actions">
            <button class="primary" type="button" id="btnPrint">Imprimer / PDF</button>
            <button type="button" id="btnSave">Sauvegarder</button>
            <button type="button" id="btnDownload">Télécharger mes réponses (.json)</button>
            <button type="button" id="btnReset">Réinitialiser</button>
          </div>
          <p class="muted small smallprint">Astuce : “Télécharger mes réponses” crée un fichier .json (pratique pour garder une trace ou envoyer à quelqu’un).</p>

          <div class="divider"></div>

          <label>Domaine prioritaire aujourd’hui (choix unique)</label>
          <div class="chips" role="radiogroup">
            <label class="chip"><input type="radio" name="domaine" value="Famille / parentalité"> Famille</label>
            <label class="chip"><input type="radio" name="domaine" value="Couple / relationnel"> Relationnel</label>
            <label class="chip"><input type="radio" name="domaine" value="Professionnel / activité"> Professionnel</label>
            <label class="chip"><input type="radio" name="domaine" value="Finances / administratif"> Finances</label>
            <label class="chip"><input type="radio" name="domaine" value="Santé / énergie / sommeil"> Santé/Énergie</label>
            <label class="chip"><input type="radio" name="domaine" value="Organisation / charge mentale"> Organisation</label>
            <label class="chip"><input type="radio" name="domaine" value="Confiance / limites"> Confiance/Limites</label>
            <label class="chip"><input type="radio" name="domaine" value="Autre"> Autre</label>
          </div>

          <label>Si “Autre”, précise</label>
          <input type="text" name="domaine_autre" placeholder="Ex : déménagement, étude, séparation, projet perso…" />

          <label>Ce que je veux obtenir (simple)</label>
          <textarea name="objectif_simple" placeholder="Cette semaine / maintenant, j’ai besoin de…"></textarea>

          <label>Mon résultat “minimum vital”</label>
          <textarea name="minimum_vital" placeholder="Si je n’obtiens qu’un petit progrès, ce serait…"></textarea>

          <div class="nav">
            <span></span>
            <a class="linkbtn primary" href="temps-2.html">Aller au Temps 2 →</a>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    const KEY = "capclair_t1_v1";

    function fields(){
      return Array.from(document.querySelectorAll("input, textarea")).filter(el => el.name);
    }
    function serialize(){
      const data = {};
      for(const el of fields()){
        if(el.type === "radio"){
          if(el.checked) data[el.name] = el.value;
          else if(!(el.name in data)) data[el.name] = "";
        } else {
          data[el.name] = el.value ?? "";
        }
      }
      return data;
    }
    function apply(data){
      for(const el of fields()){
        const v = data[el.name];
        if(el.type === "radio") el.checked = (v && el.value === v);
        else el.value = (typeof v === "string") ? v : "";
      }
    }
    function save(){ localStorage.setItem(KEY, JSON.stringify(serialize())); }
    function load(){
      try{ const raw = localStorage.getItem(KEY); if(raw) apply(JSON.parse(raw)); }catch(e){}
    }
    function downloadJSON(){
      const payload = {
        fiche: "Cap Clair — Temps 1",
        exported_at: new Date().toISOString(),
        data: serialize()
      };
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "capclair-temps-1-reponses.json";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }
    function resetAll(){
      if(!confirm("Réinitialiser toutes les réponses du Temps 1 ?")) return;
      localStorage.removeItem(KEY);
      location.reload();
    }

    document.getElementById("btnPrint").addEventListener("click", () => window.print());
    document.getElementById("btnSave").addEventListener("click", () => { save(); alert("Sauvegardé ✅"); });
    document.getElementById("btnDownload").addEventListener("click", downloadJSON);
    document.getElementById("btnReset").addEventListener("click", resetAll);

    load();
    window.addEventListener("beforeunload", save);
  </script>
</body>
</html>
